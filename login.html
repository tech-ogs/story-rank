<html>
	<head>
	<link rel="icon" type="image/jpeg" href="http://www.story-rank.com/assets/thumbs/rnv-logo.jpg">
	<link rel="apple-touch-icon" type="image/jpeg" href="http://www.story-rank.com/assets/thumbs/rnv-logo.jpg">
	<link rel="stylesheet" href="/assets/login.css">

    <title>rankNvote Login</title>
    <script>
      function doLogin() {
        var msgbox = document.getElementById('msgbox')
        var login = document.getElementById('login-name').value
        var password = document.getElementById('login-password').value
        var headers = new Headers();
        headers.append('Content-Type', 'application/json');
        window.fetch('/login', {
          method: 'post',
          credentials: 'same-origin',
          headers: headers,
          body: JSON.stringify({login: login, password: password})
        })
        .then( res => {
          if (!res.ok ) {
            throw res
          }
          return res.json()
        })
        .then( response => {
          window.location.href = '/'
        })
        .catch( err => {
          err.json().then( obj => {
            msgbox.innerHTML = obj.message
          })
        })
      }
/*

      function doReset() {
        var msgbox = document.getElementById('msgbox')
        var login = document.getElementById('login-name').value
        var password = document.getElementById('login-password').value
        var headers = new Headers();
        headers.append('Content-Type', 'application/json');
        window.fetch('/reset', {
          method: 'post',
          credentials: 'same-origin',
          headers: headers,
          body: JSON.stringify({login: login, password: password})
        })
        .then( res => {
          if (!res.ok ) {
            throw res
          }
          return res.json()
        })
        .then( response => {
          var code = response.code
          msgbox.innerHTML = '"' + login + ':' + code + '" < send this string to admin'
        })
        .catch( err => {
          err.json().then( obj => {
            msgbox.innerHTML =  obj.message
          })
        })
      }
*/
		function signup() {
			window.location.assign('/signup.html')
		}

		function recoverWithLogin() {
			window.location.assign('/recover-with-login.html')
		}
    </script>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
	</head>
<body>
	<div class="background"></div>
	<div class="backdrop"></div>
	<div class="login-form-container" id="login-form">
		<div class="login-form-content">
			<div class="login-form-header">
				<div class="logo">
					<img src="/assets/rnv-logo.png" onclick="window.location.href='/'">
				</div>
				<!-- <h3>Please Login</h3> -->
				<h3>rankNvote</h3>
			</div>
				<br>
        	<div id="msgbox" class="message-box">
			<form method="post" action="" class="login-form">
				<div class="input-container">
					<i class="fa fa-envelope"></i>
					<input type="email" class="input" name="login-name" id="login-name" placeholder="Login"/>
				</div>
				<div class="input-container">
					<i class="fa fa-lock"></i>
					<input type="password"  id="login-password" class="input" name="password" placeholder="Password"/>
					<i id="show-password" class="fa fa-eye"></i>
				</div>
				<input type="button" name="login" value="Login" class="button" onclick="doLogin()"/>
				<br>
        <div>
				<br>
				<br>
				<br>
				<br>
				<a href="#" class="register" onclick="signup()">Sign Up</a>
				<br>
				<a href="#" class="register" onclick="recoverWithLogin()">Trouble logging in ?</a>
        </div>
        </div>
			</form>
		</div>
	</div>
</body>
</html>
